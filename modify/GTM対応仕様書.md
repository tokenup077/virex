
---

# GTM対応仕様書（Webインフラ事業・最終確定）

---

## 0. GTM対応の基本方針（最重要）

### 公式スタンス（明文化）

> 本サービスにおける Google Tag Manager（GTM）の役割は、
> **Webサイトの基本的な利用状況を把握するための「計測の土台」提供に限定する。**
>
> 広告最適化、成果改善、ABテスト等を目的とした高度な計測・運用は対象外とする。

---

### 明確に「やらないこと」

* 広告タグ設定
* コンバージョン最適化
* カスタムイベント設計
* 計測データの解釈・改善提案
* GA4以外の分析基盤連携

👉 **GTMはインフラであり、マーケティングではない**

---

## 1. 固定イベント洗い出し（計測対象の全体像）

### 計測方針

* **全サイト共通**
* **全顧客共通**
* **設定変更不可**

### 計測カテゴリ

1. ページ閲覧
2. 主要導線の利用
3. フォーム送信

---

## 2. 固定イベント一覧（確定）

### 2.1 ページ閲覧系（基本）

| イベント名     | 内容    |
| --------- | ----- |
| page_view | ページ表示 |

※ GA4の標準イベントを利用
※ カスタム化しない

---

### 2.2 主要導線イベント（重要）

| イベント名         | 対象         |
| ------------- | ---------- |
| click_reserve | 予約・問い合わせ導線 |
| click_menu    | メニュー閲覧     |
| click_access  | アクセス確認     |

---

### 2.3 フォームイベント

| イベント名       | 内容       |
| ----------- | -------- |
| form_view   | フォーム表示   |
| form_submit | フォーム送信完了 |

---

## 3. イベント仕様確定（詳細）

### 3.1 click_reserve

| 項目    | 内容                   |
| ----- | -------------------- |
| イベント名 | click_reserve        |
| 発火条件  | CTAボタンのクリック          |
| 対象要素  | `data-gtm="reserve"` |
| ページ   | 全ページ                 |

---

### 3.2 click_menu

| 項目    | 内容            |
| ----- | ------------- |
| イベント名 | click_menu    |
| 発火条件  | Menuナビクリック    |
| 対象要素  | グローバルナビ「Menu」 |
| ページ   | 全ページ          |

---

### 3.3 click_access

| 項目    | 内容              |
| ----- | --------------- |
| イベント名 | click_access    |
| 発火条件  | Accessナビクリック    |
| 対象要素  | グローバルナビ「Access」 |
| ページ   | 全ページ            |

---

### 3.4 form_view

| 項目    | 内容           |
| ----- | ------------ |
| イベント名 | form_view    |
| 発火条件  | Contactページ表示 |
| 対象要素  | URL判定        |
| ページ   | Contact      |

---

### 3.5 form_submit

| 項目    | 内容          |
| ----- | ----------- |
| イベント名 | form_submit |
| 発火条件  | フォーム送信成功    |
| 対象要素  | submit完了時   |
| ページ   | Contact     |

---

## 4. イベント設計ルール（固定）

### 命名ルール

* 英小文字＋スネークケース
* 業種依存なし
* 意味が即分かる名称

### 禁止事項

* 顧客ごとのイベント追加
* イベント名変更
* パラメータ増設
* コンバージョン指定

---

## 5. GTM設定方法決定

### 5.1 Container ID 管理方式（確定）

**方式：環境変数（env）管理**

#### 理由

* ビルド時注入が可能
* CMS・フォームと分離
* 顧客操作不要
* セキュリティ・再現性が高い

---

### 5.2 実装仕様（概念）

* `GTM_CONTAINER_ID` を環境変数として設定
* ビルド時に `<head>` に自動埋め込み
* 未設定時は GTM 無効（エラーにならない）

👉 **GTMは「あるときだけ動く」設計**

---

## 6. 顧客側設定範囲（明文化）

### 顧客ができること

* Container ID の提出（フォーム入力）
* GA4との連携（自己責任）

### 顧客ができないこと

* GTM内設定変更依頼
* イベント追加要望
* 広告タグ設置依頼

---

## 7. KPI（GTM対応フェーズ）

| 指標      | 目標    |
| ------- | ----- |
| GTM実装率  | 100%  |
| 設定問い合わせ | 月0〜1件 |
| イベント差分  | 0     |
| 人的設定工数  | 月0時間  |

---

## 8. 仕様としての宣言文（対外用）

> 本サービスでは、Webサイトの基本的な利用状況を把握するため、
> Google Tag Manager を用いた最低限の計測基盤を提供しています。
>
> 広告運用や高度な分析を目的としたタグ設定・計測設計は、
> 本サービスの提供範囲には含まれていません。

---

## 9. この設計の戦略的メリット

* 問い合わせが増えない
* マーケ支援に引きずられない
* どの業種にも横展開可能
* Business OS 上位展開と衝突しない

---

