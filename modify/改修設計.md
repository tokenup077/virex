
---

## 指示書：Virex をベースに、今回仕様のサービスサイトテンプレへ改変する

### 0. 目的（改変ゴール）

* Virex（Astroテーマ）を改変し、**個人店舗（リラクゼーションサロン）向けのサービスサイトテンプレ**として再利用できる状態にする
* **グローバルナビは「サービス / 料金 / お問い合わせ」のみ（和文表記固定）**
* privacy / legal / 特商法などは**フッターのみ**に配置（ナビから排除）
* 将来的に顧客ごとに文言を差し替えできる前提（ただし初期はテンプレ＋最小変数差し替え）

---

## 1. ローカル確認（まず必ずやる）

実装者（LLM）は最初に以下を行い、**Virexの実構成**に合わせてパスを確定する。

### 1-1. リポジトリ取得・起動

* `git clone` → `npm i`（またはpnpm）→ `npm run dev`
* ビルド確認：`npm run build` が通ること

### 1-2. 構成把握（重要）

以下を探して実ファイル名を確定する（代表例）：

* レイアウト：`src/layouts/BaseLayout.astro` / `src/layouts/Layout.astro`
* ナビ：`src/components/Header.astro` / `Navbar.astro`
* フッター：`src/components/Footer.astro`
* ルーティング：`src/pages/**`
* 設定：`astro.config.mjs` / `src/config/**` / `site.config.*`
* スタイル：`src/styles/**` / `tailwind.config.*`

> 指示：ナビ・フッター・レイアウトの実体がどこにあるかを先に特定し、以降の改修対象を確定する。

---

## 2. IA（情報設計）/ ルーティング仕様（固定）

### 2-1. 公開ページ（必須）

* `/`（トップ：LP）
* `/service`（サービス）
* `/price`（料金）
* `/contact`（お問い合わせ）

### 2-2. フッターのみ（ナビ非表示）

* `/privacy`（プライバシーポリシー）
* `/legal`（利用規約 or 免責）
* `/tokusho`（特商法：要否判断は別途。ただし「出す場合」に備えページは用意しておく）

### 2-3. 既存ページの扱い

* Virexに既存で Blog / Works / About 等がある場合：

  * **リンク導線は削除**
  * ページ自体は残しても良いが、公開導線がない状態にする
  * その他のページも、いったんは残す（カスタム流用目的）

---

## 3. グローバルナビ（固定仕様）

### 3-1. 表記（和文固定）

* サービス（`/service`）
* 料金（`/price`）
* お問い合わせ（`/contact`）

### 3-2. 実装ルール

* ナビ項目は **定数配列で一元管理**（例：`src/config/navigation.ts`）
* Header / Drawer / MobileMenu が別コンポーネントなら **同じ定数参照**
* ロゴクリックは `/` 固定
* 既存の多階層ナビがある場合でも、今回は**単階層**に落とす

---

## 4. コンテンツ差し替え（“固定ではなく変数化”）

「ページごとに入力可能箇所を作り、デフォルトは用意。フォーム入力があれば置換」という方針に合わせる。

### 4-1. 変数（最小セット）

テンプレの差し替え変数はまずこれだけに絞る（増やしすぎない）：

**ブランド**

* `brand.name`（店舗名）
* `brand.tagline`（サブコピー短）
* `brand.area`（例：那覇）
* `brand.phone`（任意）
* `brand.lineUrl`（任意）
* `brand.instagramUrl`（任意）
* `brand.address`（任意：載せる場合のみ）

**サービス**

* `service.primaryOffer`（例：整体/指圧/アロマ）
* `service.features[]`（3〜6個）
* `service.menu[]`（任意：コース・所要時間・料金）

**CTA**

* `cta.primaryText`（例：今すぐ予約の相談をする）
* `cta.primaryUrl`（基本は `/contact` か `LINE/Instagram`）

### 4-2. データ配置（推奨）

* `src/content/site.json`（または `src/data/site.ts`）に集約
* 各ページはこのデータを読み、表示に反映する

> 指示：文言をコンポーネント内に直書きしない。必ず `site.*` から参照する。

---

## 5. 各ページ仕様（実装に必要な粒度）

### 5-1. `/` トップ（LP）

**セクション構成（推奨固定）**

1. Hero（店舗名＋メインコピー＋CTA）
2. 悩み訴求（3点）
3. 選ばれる理由（features）
4. サービス概要（primaryOffer + 3行説明）
5. 料金導線（最安プラン例＋料金へ）
6. よくある質問（3〜6）
7. CTA（固定）

### 5-2. `/service`

* 提供メニュー（3〜6）
* 対象者/対象外（簡易）
* 施術の流れ（3〜5ステップ）
* CTA（Contactへ）

### 5-3. `/price`

* 料金表（年会費モデルを将来載せる前提なら、まず「プラン3段」固定）
* 注意事項（返金/キャンセル/対応範囲）
* CTA（Contactへ）

### 5-4. `/contact`

* フォーム方式は後続決定だが、まずは以下で仮実装可能にする

  * **外部フォーム埋め込み**（Google Form / Tally / Typeform）
  * もしくは `Astro + API route`（Netlify/Vercel）で送信
* “ファネル追跡しやすい”実装にするため、送信完了は **`/contact/thanks`** に遷移（この1ページが計測の要）

---

## 6. 計測（GTM/GA4の土台のみ）

### 6-1. GTM埋め込み（環境変数でON/OFF）

* `.env` に `PUBLIC_GTM_CONTAINER_ID=GTM-XXXX`
* レイアウトで `PUBLIC_GTM_CONTAINER_ID` が存在する時だけ挿入
* 仕様として「GTMは計測の土台のみ」を README（運用ドキュメント）に明記

### 6-2. 固定イベント（最小）

まずは“最小でBIにつながる”前提で以下だけに絞る：

* `view_page`（自動）
* `cta_click`（Hero CTA / Footer CTA）
* `contact_submit`（thanks到達で発火）

> 指示：クリック要素には `data-gtm="cta_hero"` のような属性を付け、GTM側で拾えるようにしておく（実装の手戻り防止）。

---

## 7. SEO（基本だけ固定）

* 各ページ：title/description/canonical
* OGP：`og:title/og:description/og:image`
* sitemap（Astroのsitemap導入 or ビルド生成）
* robots（noindex は原則なし）

LocalBusiness 構造化データは「サロン顧客サイトには有効」だが、自社サービスサイトにも将来入れるなら：

* 自社は `Organization`（または `LocalBusiness` でも可だが実体に合わせる）
* 顧客テンプレには `LocalBusiness` をオプション化（`brand.address` がある場合のみ出す等）

---

## 8. デプロイ前提（改変テーマとして再利用）

テンプレとして量産するため、以下をリポジトリ内に持つ。

* `README.md`

  * セットアップ手順
  * 変数（site.json）の編集箇所
  * GTMの設定（envのみ、タグ作業は運用側）
* `scripts/`（任意）

  * `create-customer.mjs`（顧客フォルダ生成や`site.json`複製を自動化する場合）

---

## 9. 実装タスク（LLMにそのまま渡す順番）

1. Virexのレイアウト/ヘッダー/フッターの実体を特定
2. ナビを「サービス/料金/お問い合わせ」に固定（和文）
3. 既存導線（Blog/Works/About）を削除
4. 必須ページ `/service /price /contact` を追加（見た目はVirexの既存コンポーネント流用）
5. `src/content/site.json` を追加し、主要文言を参照化（直書き排除）
6. `/contact/thanks` を追加（計測用）
7. GTM埋め込みをレイアウトに追加（envがある時だけ）
8. SEO（title/description/OGP）の共通化（レイアウト or ヘルパー）
9. build/deploy確認（`npm run build`）

---

